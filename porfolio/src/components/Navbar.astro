---
import { getLangFromUrl, useTranslations, getRouteFromUrl } from '../i18n/utils';
import { languages } from '../i18n/ui';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
const route = getRouteFromUrl(Astro.url);
---

<nav class="fixed top-0 left-0 right-0 z-50 bg-black/90 backdrop-blur-sm border-b border-white/10">
  <div class="w-full px-4 sm:px-6 lg:px-8">
    <div class="hidden md:grid grid-cols-3 items-center h-16 max-w-6xl mx-auto gap-4">
      <!-- Left side items -->
      <div class="flex items-center gap-8 justify-end">
        <a href={lang === 'es' ? '/' : `/${lang}`} class="text-white hover:text-gray-300 transition-colors">
          {t('nav.home')}
        </a>
        <a href={lang === 'es' ? '/#about' : `/${lang}#about`} class="text-white hover:text-gray-300 transition-colors">
          {t('nav.about')}
        </a>
      </div>

      <!-- Center - Name -->
      <a href={lang === 'es' ? '/' : `/${lang}`} class="text-xl font-bold text-white hover:text-gray-300 transition-colors whitespace-nowrap text-center">
        JESUS DIAZ
      </a>

      <!-- Right side: nav items + language selector -->
      <div class="flex items-center gap-8 justify-start">
        <a href={lang === 'es' ? '/#projects' : `/${lang}#projects`} class="text-white hover:text-gray-300 transition-colors">
          {t('nav.projects')}
        </a>
        <a href={lang === 'es' ? '/#contact' : `/${lang}#contact`} class="text-white hover:text-gray-300 transition-colors">
          {t('nav.contact')}
        </a>

        <div class="flex items-center gap-2 ml-auto">
          {Object.entries(languages).map(([code, name]) => (
            <a
              href={code === 'es' ? route : `/${code}${route === '/' ? '' : route}`}
              class={`text-sm px-2 py-1 rounded transition-colors ${
                lang === code
                  ? 'bg-white text-black font-semibold'
                  : 'text-white hover:bg-white/10'
              }`}
            >
              {code.toUpperCase()}
            </a>
          ))}
        </div>
      </div>
    </div>

    <!-- Mobile menu -->
    <div class="flex md:hidden items-center justify-center h-16 relative">
      <a href={lang === 'es' ? '/' : `/${lang}`} class="text-xl font-bold text-white hover:text-gray-300 transition-colors">
        JESUS DIAZ
      </a>

      <button id="menu-toggle" class="text-white p-2 absolute right-0">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
        </svg>
      </button>
    </div>

    <div id="mobile-menu" class="hidden md:hidden pb-4">
      <div class="flex flex-col gap-4">
        <a href={lang === 'es' ? '/' : `/${lang}`} class="text-white hover:text-gray-300 transition-colors">
          {t('nav.home')}
        </a>
        <a href={lang === 'es' ? '/#about' : `/${lang}#about`} class="text-white hover:text-gray-300 transition-colors">
          {t('nav.about')}
        </a>
        <a href={lang === 'es' ? '/#projects' : `/${lang}#projects`} class="text-white hover:text-gray-300 transition-colors">
          {t('nav.projects')}
        </a>
        <a href={lang === 'es' ? '/#contact' : `/${lang}#contact`} class="text-white hover:text-gray-300 transition-colors">
          {t('nav.contact')}
        </a>
      </div>
    </div>
  </div>
</nav>

<script src="../scripts/navbar.ts"></script>

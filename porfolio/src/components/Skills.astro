---
import { getLangFromUrl, useTranslations } from '../i18n/utils';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

// Categor√≠as de skills
const categories = {
  languages: {
    name: lang === 'es' ? 'Lenguajes de Programaci√≥n' : 'Programming Languages',
    skills: [
      { name: 'C', icon: 'devicon-c-plain' },
      { name: 'C#', icon: 'devicon-csharp-plain' },
      { name: 'C++', icon: 'devicon-cplusplus-plain' },
      { name: 'JavaScript', icon: 'devicon-javascript-plain' },
      { name: 'TypeScript', icon: 'devicon-typescript-plain' },
      { name: 'Python', icon: 'devicon-python-plain' },
      
    ]
  },
  frontend: {
    name: lang === 'es' ? 'Desarrollo Frontend' : 'Frontend Development',
    skills: [
      { name: 'Astro', icon: 'devicon-astro-plain' },
      { name: 'Bootstrap', icon: 'devicon-bootstrap-plain' },
      { name: 'CSS', icon: 'devicon-css3-plain' },
      { name: 'HTML', icon: 'devicon-html5-plain' },
      { name: 'Next.js', icon: 'devicon-nextjs-plain' },
      { name: 'React', icon: 'devicon-react-original' },
      { name: 'Tailwind CSS', icon: 'devicon-tailwindcss-plain' },
    ]
  },
  backend: {
    name: lang === 'es' ? 'Desarrollo Backend' : 'Backend Development',
    skills: [
      { name: 'ASP.NET', icon: 'devicon-dotnetcore-plain' },
      { name: 'FastAPI', icon: 'devicon-fastapi-plain' },
      { name: 'Supabase', icon: 'devicon-supabase-plain' },
    ]
  },
  desktop: {
    name: lang === 'es' ? 'Desarrollo de Apps de Escritorio' : 'Desktop App Development',
    skills: [
      { name: 'Windows Forms', icon: 'devicon-windows8-original' },
    ]
  },
  data: {
    name: lang === 'es' ? 'An√°lisis de Datos' : 'Data Analysis',
    skills: [
      { name: 'Pandas', icon: 'devicon-pandas-plain' },
    ]
  }
};
---

<section id="skills" class="py-20 bg-black/50">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="text-center mb-16">
      <h2 class="text-4xl sm:text-5xl font-bold text-white mb-4">
        üíª Skills
      </h2>
      <p class="text-lg text-gray-400 max-w-2xl mx-auto">
        {lang === 'es'
          ? 'Tecnolog√≠as y herramientas que domino para crear soluciones web modernas y eficientes'
          : 'Technologies and tools I master to create modern and efficient web solutions'}
      </p>
    </div>

    <!-- Filter Combobox -->
    <div class="flex justify-start mb-12">
      <select
        id="category-filter"
        class="px-6 py-3 pr-12 rounded-lg bg-white/10 text-white font-semibold cursor-pointer border border-white/20 focus:outline-none focus:ring-2 focus:ring-blue-600 transition-all appearance-none bg-no-repeat bg-right"
        style="background-image: url('data:image/svg+xml;charset=UTF-8,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 24 24%27 fill=%27none%27 stroke=%27white%27 stroke-width=%272%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27%3e%3cpolyline points=%276 9 12 15 18 9%27%3e%3c/polyline%3e%3c/svg%3e'); background-position: right 0.75rem center; background-size: 1.25rem;"
      >
        <option value="all" selected class="bg-gray-900 text-white">{lang === 'es' ? 'Todas las categor√≠as' : 'All categories'}</option>
        {Object.entries(categories).map(([key, category]) => (
          <option value={key} class="bg-gray-900 text-white">{category.name}</option>
        ))}
      </select>
    </div>

    <!-- Skills Grid -->
    <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-6">
      {Object.entries(categories).map(([categoryKey, category]) => (
        category.skills.map((skill) => (
          <div class="skill-card group flex flex-col items-center gap-3 p-4 rounded-xl bg-white/5 hover:bg-white/10 transition-all duration-300 hover:scale-110" data-category={categoryKey}>
            <div class="w-16 h-16 flex items-center justify-center">
              <i class={`${skill.icon} text-6xl`}></i>
            </div>
            <span class="text-sm font-medium text-gray-300 group-hover:text-white transition-colors text-center">
              {skill.name}
            </span>
          </div>
        ))
      ))}
    </div>
  </div>
</section>

<script>
  const categoryFilter = document.getElementById('category-filter') as HTMLSelectElement;
  const skillCards = document.querySelectorAll<HTMLElement>('.skill-card');

  categoryFilter?.addEventListener('change', () => {
    const filter = categoryFilter.value;

    // Filter skill cards
    skillCards.forEach(card => {
      if (filter === 'all') {
        card.style.display = 'flex';
      } else {
        const category = card.getAttribute('data-category');
        card.style.display = category === filter ? 'flex' : 'none';
      }
    });
  });
</script>